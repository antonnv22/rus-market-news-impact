## Анализ влияния новостных данных на российский фондовый рынок (NLP / TS)

В качестве источника финансовых новостей использователся датасет https://www.kaggle.com/datasets/kkhubiev/russian-financial-news

## 1. Постановка задачи

**Цель работы**

Целью данной работы является исследование влияния новостного фона на динамику цен акций российских компаний, торгующихся на Московской бирже.

**Исследовательские вопросы**

* Существует ли статистически значимая связь между новостным сентиментом и доходностью акций?
* Влияет ли новостной сентимент на цену с лагом?
* Какие новости оказывают наибольшее влияние на движение цены?
* Отличается ли влияние позитивных и негативных новостей?

**Практическая значимость**
Результаты работы могут быть использованы:

* для построения торговых стратегий на основе новостей;
* для оценки рыночной реакции на информационные события;
* в аналитических и исследовательских задачах финансового анализа.

---

## 2. Описание данных

### 2.1 Новостные данные

Использовались новостные сообщения из следующих источников:

* RBC
* Finam
* Smart-Lab
* BCS и др.

Для каждого сообщения доступны:

* дата публикации;
* тикер компании;
* текст новости;
* источник.

**Предобработка новостей включала:**

* очистку текста;
* приведение дат к дневному формату;
* агрегацию новостей по тикеру и дате;
* вычисление дневного сентимента.

**Вывод:**
Новостные данные обладают высокой зашумлённостью, при этом активность публикаций существенно различается между тикерами.

---

### 2.2 Рыночные данные

Использовались дневные котировки акций с Московской биржи:

* цена закрытия;
* объём торгов;
* доходности.

Для каждого тикера данные загружались в интервале от первой до последней даты появления новостей.

**Вывод:**
Синхронизация новостей и рыночных данных позволила корректно сопоставлять информационные события и ценовую динамику.

---

## 3. Формирование признаков

### 3.1 Новостные признаки

Были сформированы следующие признаки:

* дневной сентимент;
* количество новостей в день;
* лаги сентимента (t−1, t−3, t−5).

### 3.2 Рыночные признаки

Использовались:

* доходности с лагами;
* объёмы торгов;
* волатильность.

**Почему лаги важны:**
Рынок не всегда реагирует мгновенно на новостную информацию, поэтому учитывается отложенный эффект.

**Вывод:**
Использование лагов позволяет модели учитывать динамическую реакцию рынка на новости.

---

## 4. Модельный подход

### 4.1 Выбор модели

Для моделирования использовался **CatBoost**, поскольку:

* он хорошо работает с шумными финансовыми данными;
* способен улавливать нелинейные зависимости;
* предоставляет корректную поддержку SHAP-значений.

**Важно:**
Модель использовалась **не столько для прогнозирования**, сколько для анализа и интерпретации влияния признаков.

---

### 4.2 Обучение модели

Модель обучалась на задаче прогнозирования цены закрытия следующего торгового дня, что эквивалентно прогнозированию дневной доходности при фиксированной текущей цене.

Использовалось:

* временное разбиение данных;
* контроль переобучения.

**Вывод:**
Модель демонстрирует ограниченную прогнозную силу, что соответствует свойствам финансовых временных рядов.

---

## 5. Интерпретация результатов (SHAP-анализ)

### 5.1 SHAP-значения

SHAP-анализ позволил:

* оценить вклад новостного сентимента в движение цены;
* выявить дни, когда новости вносили наибольший вклад;
* отфильтровать price-moving новости.

### 5.2 Анализ новостей

Для дней с высоким абсолютным SHAP-вкладом:

* были извлечены соответствующие новости;
* проведён качественный анализ их содержания.

**Вывод:**
Не все новости оказывают влияние на цену. Существенный эффект имеют новости, связанные с:

* финансовыми результатами;
* корпоративными событиями;
* регуляторными изменениями.

---

## 6. Общие выводы и результаты

1. Новостной сентимент оказывает влияние на динамику цен, однако эффект:

   * нерегулярен;
   * асимметричен;
   * зависит от контекста рынка.

2. Негативные новости в среднем оказывают более сильное влияние, чем позитивные.

3. Большая часть новостей не влияет на цену, но отдельные события вызывают значимые движения.

4. Использование SHAP позволяет перейти от агрегированного анализа к анализу конкретных событий.

---

## 7. Ограничения работы

* Высокий уровень шума в новостных данных.
* Отсутствие внутридневных котировок.
* Возможное запаздывание публикации новостей.
* Ограниченная предсказательная сила моделей для финансовых рынков.

---

## 8. Направления дальнейших исследований

* Использование внутридневных данных.
* Разделение новостей по типам (отчёты, слухи, регуляторика).
* Сравнение с классическим event study.
* Использование других методов NLP.

---
